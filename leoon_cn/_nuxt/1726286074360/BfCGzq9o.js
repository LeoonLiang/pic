import{_ as $,E as C,a as S}from"./CVjXudTu.js";import{u as B,e as I}from"./BMayvCb4.js";import{q as y,ad as V,v as s,x as o,y as n,T as p,U as u,J as k,ac as L,I as l,ai as b,al as E,r as _,k as P,P as v,j as g,Q as N}from"./BJz0uiRT.js";import{O as w}from"./B3cdkYAV.js";const T=(e,t)=>`https://cdn.tsinbei.com/gh/LeoonLiang/pic@main/tuchong/image-${e}.${t?"avif":"jpg"}`,q=y({name:"PictureCard",props:{imageList:{type:Array,default:""},title:{type:String,default:""},desc:{type:String,default:""},favorites:{type:Number,default:0}},data(){return{originList:[],curIndex:0,showViewer:!1}},methods:{handlePopstate(e){this.showViewer&&w.close()},viewImage(e){w.show(this.imageList.map(t=>({src:T(t.img_id.toString(),this.$supportsAvif.value),thumb:t.lr,type:"image"})),{Toolbar:!1,startIndex:e,showClass:!1,hideClass:!1,on:{ready:()=>{history.pushState({popup:!0},""),window.addEventListener("popstate",this.handlePopstate),this.showViewer=!0},close:()=>{this.showViewer=!1,history.state&&history.state.popup&&history.back(),window.removeEventListener("popstate",this.handlePopstate)}}})}}}),O={class:"leoon-picture-wall"},j={class:"leoon-picture-wall-info"},x={key:0,class:"leoon-picture-wall-title"},A={key:1,class:"leoon-picture-wall-excerpt"},D={key:2,class:"leoon-picture-wall-addition"},J={class:"leoon-picture-wall-img"},M={class:"leoon-picture-wall-img-wrapper"},F={key:0,class:"leoon-picture-wall-img-wrapper nine"};function H(e,t,r,d,f,c){const h=$;return s(),o("div",O,[n("div",j,[e.title?(s(),o("div",x,p(e.title),1)):u("",!0),e.desc?(s(),o("div",A,p(e.desc),1)):u("",!0),e.favorites?(s(),o("div",D," 喜欢 "+p(e.favorites),1)):u("",!0)]),n("div",J,[(s(!0),o(k,null,L(e.imageList.slice(0,8),(a,m)=>(s(),o("div",M,[l(h,{onClick:i=>e.viewImage(m),src:a.lr,ratio:"1",fit:"cover"},null,8,["onClick","src"])]))),256)),e.imageList.length>8?(s(),o("div",F,[l(h,{src:e.imageList[8].lr,ratio:"1",fit:"cover"},null,8,["src"]),n("div",{onClick:t[0]||(t[0]=a=>e.viewImage(8)),class:"img-number-mask"}," +"+p(e.imageList.length-8),1)])):u("",!0)])])}const Q=V(q,[["render",H]]),R={class:"post-wrapper",style:{width:"1086px"}},U={class:"leoon-picture-wall"},W={class:"leoon-picture-wall-info"},z={class:"leoon-picture-wall-img"},Z=y({__name:"index",setup(e){const t=b();E({title:"摄影 - Leoon Liang - Blog",ogTitle:"摄影 - Leoon Liang - Blog"});const r=_([]),d=_(!0),f=async()=>{try{const{data:c}=await $fetch("/api/tc",{params:t.query,headers:{...B(t.query)}});c&&(r.value=JSON.parse(I(c)).post_list)}catch{}finally{d.value=!1}};return P(()=>{f()}),(c,h)=>{const a=S,m=C;return s(),o("div",R,[l(m,{loading:g(d)&&g(r).length===0,animated:"",count:3,throttle:60},{template:v(()=>[n("div",U,[n("div",W,[l(a,{variant:"h1",class:"leoon-picture-wall-title",style:{width:"70%"}}),l(a,{variant:"h3",class:"leoon-picture-wall-excerpt",style:{width:"50%"}}),l(a,{variant:"text",class:"leoon-picture-wall-addition",style:{width:"20%"}})]),n("div",z,[l(a,{variant:"image",style:{width:"100%"}})])])]),default:v(()=>[(s(!0),o(k,null,L(g(r),i=>(s(),N(Q,{key:i.post_id,"image-list":i.images,title:i.title,desc:i.excerpt,favorites:i.favorites,styles:i.styles},null,8,["image-list","title","desc","favorites","styles"]))),128))]),_:1},8,["loading"])])}}});export{Z as default};
