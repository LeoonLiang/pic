import{_ as C,E as S,a as B}from"./CJY1QaGJ.js";import{u as I,e as V}from"./L7LwRcI_.js";import{d as k,ad as b,x as s,c as o,y as r,T as u,U as m,J as L,ac as $,I as n,ai as E,al as P,r as w,m as N,P as v,l as g,Q as T}from"./BvDKg8Pr.js";import{O as y}from"./C2aU_6E0.js";const O=(e,t)=>`https://cdn.tsinbei.com/gh/LeoonLiang/pic@main/tuchong/image-${e}.${t?"avif":"jpg"}`,q=k({name:"PictureCard",props:{imageList:{type:Array,default:""},title:{type:String,default:""},desc:{type:String,default:""},favorites:{type:Number,default:0}},data(){return{originList:[],curIndex:0,showViewer:!1}},methods:{handlePopstate(e){this.showViewer&&y.close()},viewImage(e){y.show(this.imageList.map(t=>{var a;return{src:O(t.img_id.toString(),this.$supportsAvif.value),thumb:(a=t.source)==null?void 0:a.mr.replace("/mr/","/t/"),type:"image"}}),{Toolbar:!1,startIndex:e,showClass:!1,hideClass:!1,on:{ready:()=>{history.pushState({popup:!0},""),window.addEventListener("popstate",this.handlePopstate),this.showViewer=!0},close:()=>{this.showViewer=!1,history.state&&history.state.popup&&history.back(),window.removeEventListener("popstate",this.handlePopstate)}}})}}}),x={class:"leoon-picture-wall"},A={class:"leoon-picture-wall-info"},D={key:0,class:"leoon-picture-wall-title"},J={key:1,class:"leoon-picture-wall-excerpt"},M={key:2,class:"leoon-picture-wall-addition"},j={class:"leoon-picture-wall-img"},F={class:"leoon-picture-wall-img-wrapper"},H={key:0,class:"leoon-picture-wall-img-wrapper nine"};function Q(e,t,a,d,f,c){var l;const h=C;return s(),o("div",x,[r("div",A,[e.title?(s(),o("div",D,u(e.title),1)):m("",!0),e.desc?(s(),o("div",J,u(e.desc),1)):m("",!0),e.favorites?(s(),o("div",M," 喜欢 "+u(e.favorites),1)):m("",!0)]),r("div",j,[(s(!0),o(L,null,$(e.imageList.slice(0,8),(p,i)=>{var _;return s(),o("div",F,[n(h,{onClick:K=>e.viewImage(i),src:(_=p.source)==null?void 0:_.mr,ratio:"1",fit:"cover"},null,8,["onClick","src"])])}),256)),e.imageList.length>8?(s(),o("div",H,[n(h,{src:(l=e.imageList[8].source)==null?void 0:l.mr,ratio:"1",fit:"cover"},null,8,["src"]),r("div",{onClick:t[0]||(t[0]=p=>e.viewImage(8)),class:"img-number-mask"}," +"+u(e.imageList.length-8),1)])):m("",!0)])])}const R=b(q,[["render",Q]]),U={class:"post-wrapper",style:{width:"1086px"}},W={class:"leoon-picture-wall"},z={class:"leoon-picture-wall-info"},G={class:"leoon-picture-wall-img"},te=k({__name:"index",setup(e){const t=E();P({title:"摄影 - Leoon Liang - Blog",ogTitle:"摄影 - Leoon Liang - Blog"});const a=w([]),d=w(!0),f=async()=>{try{const{data:c}=await $fetch("/api/tc",{params:t.query,headers:{...I(t.query)}});c&&(a.value=JSON.parse(V(c)).post_list)}catch{}finally{d.value=!1}};return N(()=>{f()}),(c,h)=>{const l=B,p=S;return s(),o("div",U,[n(p,{loading:g(d)&&g(a).length===0,animated:"",count:3,throttle:60},{template:v(()=>[r("div",W,[r("div",z,[n(l,{variant:"h1",class:"leoon-picture-wall-title",style:{width:"70%"}}),n(l,{variant:"h3",class:"leoon-picture-wall-excerpt",style:{width:"50%"}}),n(l,{variant:"text",class:"leoon-picture-wall-addition",style:{width:"20%"}})]),r("div",G,[n(l,{variant:"image",style:{width:"100%"}})])])]),default:v(()=>[(s(!0),o(L,null,$(g(a),i=>(s(),T(R,{key:i.post_id,"image-list":i.images,title:i.title,desc:i.excerpt,favorites:i.favorites,styles:i.styles},null,8,["image-list","title","desc","favorites","styles"]))),128))]),_:1},8,["loading"])])}}});export{te as default};
