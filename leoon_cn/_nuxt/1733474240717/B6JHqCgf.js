import{d as k,r as v,m as s,o as c,c as l,b as i,F as d,a as e,f as L}from"./QvHjibVU.js";function p(o){return new URL(o).pathname.split("/").pop()}const S={class:"leoon-cover"},_={key:0,class:"loading-spinner"},E={key:1,class:"leoon-cover-picture"},j=["srcset"],H=["loading","src","alt"],B={key:2,class:"leoon-cover-picture"},C=["srcset"],W=["loading","src","alt"],$=["src","loading","alt"],V=k({__name:"Cover",props:{src:{type:String,default:""},loading:{type:String,default:"lazy"},ratio:[String,Number],fit:{type:String,default:"cover"},initialIndex:{type:Number,default:0}},setup(o){const t=o,n=v(t.initialIndex),f=v(!0),h=s(()=>{const r=typeof t.ratio=="string"?parseFloat(t.ratio)||1.7777777777777777:t.ratio||1.7777777777777777;return`padding-bottom: ${Math.round(1e4/r)/100}%;`}),u=()=>{f.value=!1},m=s(()=>{let r="";return t.fit&&(r=`${r}object-fit:${t.fit};`),r}),y=s(()=>"https://image.baidu.com/search/down?url="+t.src),b=s(()=>"https://images.weserv.nl/?url="+t.src),U=s(()=>"http://i0.wp.com/"+t.src.replace("https://","").replace("http://","")),N=s(()=>"https://cdn.cdnjson.com/"+t.src.replace("https://","").replace("http://","")),I=s(()=>t.src.endsWith(".avif")),w=s(()=>t.src.endsWith(".webp")),F=s(()=>t.src.replace("cdn.tsinbei.com","gcore.jsdelivr.net")),a=s(()=>t.src.indexOf("cdn.tsinbei.com")!==-1?[t.src,F.value]:[t.src,b.value,y.value,U.value,N.value]),g=()=>{t.src.indexOf("cdn.tsinbei.com"),n.value<a.value.length-1&&n.value++};return(r,z)=>(c(),l("div",S,[i("div",{class:"ratio-block",style:d(e(h))},null,4),e(f)?(c(),l("div",_)):L("",!0),e(I)?(c(),l("picture",E,[i("source",{srcset:e(a)[e(n)],type:"image/avif"},null,8,j),i("img",{loading:o.loading,class:"leoon-cover-img",src:e(a)[e(n)].replace(".avif",""),style:d(e(m)),onLoad:u,onError:g,alt:("useImageNameFromUrl"in r?r.useImageNameFromUrl:e(p))(o.src)},null,44,H)])):e(w)?(c(),l("picture",B,[i("source",{srcset:e(a)[e(n)],type:"image/webp"},null,8,C),i("img",{loading:o.loading,class:"leoon-cover-img",src:e(a)[e(n)].replace(".webp",""),style:d(e(m)),onLoad:u,onError:g,alt:("useImageNameFromUrl"in r?r.useImageNameFromUrl:e(p))(o.src)},null,44,W)])):(c(),l("img",{key:3,class:"leoon-cover-img",style:d(e(m)),src:e(a)[e(n)],loading:o.loading,onLoad:u,onError:g,alt:("useImageNameFromUrl"in r?r.useImageNameFromUrl:e(p))(o.src)},null,44,$))]))}});export{V as _,p as g};
